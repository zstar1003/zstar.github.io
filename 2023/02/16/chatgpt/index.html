<!DOCTYPE html><html lang="zh" theme-mode="dark"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>ChatGPT简介与Q群机器人部署教程 | zstar的安全屋</title><script>var config = {"root":"/","search":{"preload":false,"activeHolder":"Enter here","blurHolder":"Search","noResult":"Data \"$0\" not found"},"code":{"codeInfo":"$0 - $1 lines","copy":"copy","copyFinish":"copied","expand":"expand"}}</script><script src="//unpkg.com/mermaid@9.2.2/dist/mermaid.min.js"></script><link rel="stylesheet" href="/css/arknights.css"><script>if (window.localStorage.getItem('theme-mode') === 'light') document.documentElement.setAttribute('theme-mode', 'light')
if (window.localStorage.getItem('theme-mode') === 'dark') document.documentElement.setAttribute('theme-mode', 'dark')</script><style>@font-face {
 font-family: BenderLight;
 src: local('Bender'), url("/font/BenderLight.ttf");
}
@font-face {
 font-family: 'JetBrains Mono';
 src: local('JetBrains Mono'), url('/font/JetBrainsMono-Regular.woff2') format('woff2');
}</style><meta name="generator" content="Hexo 6.3.0"></head><body><div class="loading" style="opacity: 0"><div class="loadingBar left"></div><div class="loadingBar right"></div></div><main><header class="closed"><nav><div class="navBtn hide"><i class="navBtnIcon"><span class="navBtnIconBar"></span><span class="navBtnIconBar"></span><span class="navBtnIconBar"></span></i></div><div class="navItem" id="search-header"><span class="navItemTitle"><input autocomplete="off" autocorrect="off" autocapitalize="none" placeholder="Search" spellcheck="false" maxlength="50" type="text" id="search-input"></span></div><div class="navItem" id="search-holder"></div><div class="search-popup"><div id="search-result"></div></div><ol class="navContent"><li class="navItem"><a class="navBlock" href="/"><span class="navItemTitle">Home</span></a></li><li class="navItem"><a class="navBlock" href="/about/"><span class="navItemTitle">About</span></a></li><li class="navItem" matchdata="categories,tags"><a class="navBlock" href="/archives/"><span class="navItemTitle">Archives</span></a></li></ol></nav></header><article><div id="post-bg"><div id="post-title"><h1>ChatGPT简介与Q群机器人部署教程</h1><div id="post-info"><span>First Post: <div class="control"><time datetime="2023-02-16T12:53:28.000Z" id="date"> 2023-02-16</time></div></span><br><span>Last Update: <div class="control"><time datetime="2023-02-16T13:00:15.215Z" id="updated"> 2023-02-16</time></div></span><br><span>Word Count: <div class="control">4.3k</div></span><br><span>Read Time: <div class="control">18 min</div></span></div></div><hr><div id="post-content"><blockquote>
<p>最近OpenAi推出的ChatGPT火出NLP圈子，看到不少人说强人工智能已经出现，于是赶紧来体验感受一下。<br>该项目计划长期进行维护更新，欢迎star：<a target="_blank" rel="noopener" href="https://github.com/zstar1003/Qbot">https://github.com/zstar1003/Qbot</a></p>
</blockquote>
<h1 id="ChatGPT简介"><a href="#ChatGPT简介" class="headerlink" title="ChatGPT简介"></a>ChatGPT简介</h1><p>ChatGPT是一个基于GPT-3（通用语言模型）的聊天机器人。它的目的是能够通过自然语言交流与用户进行对话。它能够理解用户的输入，并根据用户的话语生成相应的回复。</p>
<p>这种技术的出现，标志着人工智能在自然语言处理方面取得了新的突破。GPT-3是目前世界上最大规模的语言模型，它被训练在数百万个文本文件上，因此具有非常强大的语言理解能力。通过在GPT-3的基础上构建ChatGPT，我们可以获得一个能够与人进行自然语言对话的机器人，它能够与人类的对话方式非常相似。</p>
<p>ChatGPT的优势在于它能够进行流畅的对话，并能够根据用户的输入自动生成合适的回复。它能够理解语境，因此可以提供更准确、更有帮助的回复。此外，它还具有语言表达能力，可以使用正确的语法和语言风格进行对话。</p>
<hr>
<p>实际上，上面三段文字完全由ChatGPT自己进行生成，如果你没察觉到异常，说明它已经通过了“图灵测试”。</p>
<p><img src="https://img-blog.csdnimg.cn/3d7b583808c34d1294d724d0813bde82.png#pic_center" alt="在这里插入图片描述"></p>
<p>目前，ChatGPT没有开源，只能通过OpenAi提供的测试界面调试，</p>
<p>ChatGPT官网：<a target="_blank" rel="noopener" href="https://chat.openai.com/chat">https://chat.openai.com/chat</a><br>注：2022-12-12 OpenAi增加了5秒的cloudflare并且大幅缩短了token的存活时间(原24小时缩短为2小时)，导致目前国内的一些镜像站均无法使用。</p>
<h1 id="ChatGPT原理"><a href="#ChatGPT原理" class="headerlink" title="ChatGPT原理"></a>ChatGPT原理</h1><p>目前ChatGPT没有相关的论文和开源代码，具OpenAi官方所述，ChatGPT是在GPT3.5架构的基础上加入了RLHF(Reinforcement Learning from Human Feedback，人类反馈强化学习)。</p>
<p><img src="https://img-blog.csdnimg.cn/15f2922a6591497da77878db2abe4590.png#pic_center" alt="在这里插入图片描述"></p>
<p>ChatGPT采用了InstructGPT的框架，InstructGPT的论文：<a target="_blank" rel="noopener" href="https://arxiv.org/pdf/2203.02155.pdf">https://arxiv.org/pdf/2203.02155.pdf</a></p>
<p>整体训练过程分成三个过程：监督学习、训练奖励模型、引入强化学习迭代模型。</p>
<p><img src="https://img-blog.csdnimg.cn/02e8c9a53a564277b1b5cb0d64fdb5e4.png#pic_center" alt="在这里插入图片描述"></p>
<h1 id="ChatGPT部署"><a href="#ChatGPT部署" class="headerlink" title="ChatGPT部署"></a>ChatGPT部署</h1><h2 id="1-注册账号"><a href="#1-注册账号" class="headerlink" title="1.注册账号"></a>1.注册账号</h2><p>首先需要注册OpenAi的账号，账号注册使用自己的邮箱，境内手机号验证无法通过，可以使用别的接码平台。<br>这里使用的是sms(<a target="_blank" rel="noopener" href="https://sms-activate.org/cn/cashBack">https://sms-activate.org/cn/cashBack</a>)，具体操作步骤很多博文都有提到，不做赘述。</p>
<h2 id="2-获取界面信息"><a href="#2-获取界面信息" class="headerlink" title="2.获取界面信息"></a>2.获取界面信息</h2><p>进入到会话界面后，按F12打开开发者工具，在此处提取并记录<code>session_token</code>：</p>
<p><img src="https://img-blog.csdnimg.cn/067c6c76fdf54e61af8220175fa65ae7.png#pic_center" alt="在这里插入图片描述"></p>
<p>同样的位置提取并记录<code>cf_clearance</code>：</p>
<p><img src="https://img-blog.csdnimg.cn/13525d38f2ae46e6a72df76c837cd98a.png#pic_center" alt="在这里插入图片描述"></p>
<p>最后，还需要提取并记录<code>user-agent</code>，这里随便找一个数据包都能够找到这个值</p>
<p><img src="https://img-blog.csdnimg.cn/ff0089f8e1f0478285cb6f3ac9b27962.png#pic_center" alt="在这里插入图片描述"></p>
<h2 id="3-调用测试"><a href="#3-调用测试" class="headerlink" title="3.调用测试"></a>3.调用测试</h2><p>ChatGPT官方有提供用于调用的API，不过试用次数很少，后续使用价格昂贵。<br>官方API文档：<a target="_blank" rel="noopener" href="https://beta.openai.com/docs/api-reference/completions/create?lang=python">https://beta.openai.com/docs/api-reference/completions/create?lang=python</a></p>
<p>调用需要设置自己的密钥：<a target="_blank" rel="noopener" href="https://beta.openai.com/account/api-keys">https://beta.openai.com/account/api-keys</a></p>
<p>在Github上，有很多开源的项目提供了很多非官方的调用库，我对于Python最为熟悉，因此使用了这个库<a target="_blank" rel="noopener" href="https://github.com/acheong08/ChatGPT">https://github.com/acheong08/ChatGPT</a></p>
<p>安装方式：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python">pip3 install revChatGPT --upgrade<br></code></pre></td></tr></table></figure>

<p>安装完之后，通过下面的程序进行测试：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">from</span> revChatGPT.revChatGPT <span class="hljs-keyword">import</span> Chatbot<br><br>config = &#123;<br>    <span class="hljs-string">&quot;session_token&quot;</span>: <span class="hljs-string">&quot;上一步的session_token&quot;</span>,<br>    <span class="hljs-string">&quot;cf_clearance&quot;</span>: <span class="hljs-string">&quot;上一步的cf_clearance&quot;</span>,<br>    <span class="hljs-string">&quot;user_agent&quot;</span>: <span class="hljs-string">&quot;上一步的user_agent&quot;</span><br>&#125;<br><br><span class="hljs-comment"># 创建ChatGPT实例</span><br>chatbot = Chatbot(config, conversation_id=<span class="hljs-literal">None</span>, debug=<span class="hljs-literal">True</span>)<br>message = chatbot.get_chat_response(<span class="hljs-string">&#x27;你好&#x27;</span>, output=<span class="hljs-string">&quot;text&quot;</span>)<br><span class="hljs-built_in">print</span>(message[<span class="hljs-string">&#x27;message&#x27;</span>])<br></code></pre></td></tr></table></figure>

<p>这里的参数修改为上一步获取到的参数。</p>
<p>如果使用正常，会输出如下结果：</p>
<p><img src="https://img-blog.csdnimg.cn/1092ba21d9c445dab7c66bfa746a7275.png#pic_center" alt="在这里插入图片描述"></p>
<h2 id="4-QQ机器人搭建"><a href="#4-QQ机器人搭建" class="headerlink" title="4.QQ机器人搭建"></a>4.QQ机器人搭建</h2><p>首先得有个小号，用于搭建机器人。<br>其次需要选择QQ机器人的框架，目前Github上也有很多选择，我这里使用<code>go-cqhttp</code>这个框架。</p>
<p>该框架支持windows和linux，我在本机上进行部署，因此选择了64位windows版本。<br>下载链接：<a target="_blank" rel="noopener" href="https://github.com/Mrs4s/go-cqhttp/releases/download/v1.0.0-rc3/go-cqhttp_windows_amd64.exe">https://github.com/Mrs4s/go-cqhttp/releases/download/v1.0.0-rc3/go-cqhttp_windows_amd64.exe</a></p>
<p>双击运行之后，选择<code>3.正向代理</code>，之后会产生一系列文件。</p>
<p>配置文件<code>config.yml</code>修改内容如下：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br></pre></td><td class="code"><pre><code class="hljs xml"># go-cqhttp 默认配置文件<br><br>account: # 账号相关<br>  uin: QQ小号 # QQ账号<br>  password: &#x27;&#x27; # QQ密码<br>  encrypt: false  # 是否开启密码加密<br>  status: 0      # 在线状态 请参考 https://docs.go-cqhttp.org/guide/config.html#在线状态<br>  relogin: # 重连设置<br>    delay: 3   # 首次重连延迟, 单位秒<br>    interval: 3   # 重连间隔<br>    max-times: 0  # 最大重连次数, 0为无限制<br><br>  # 是否使用服务器下发的新地址进行重连<br>  # 注意, 此设置可能导致在海外服务器上连接情况更差<br>  use-sso-address: true<br>  # 是否允许发送临时会话消息<br>  allow-temp-session: false<br><br>heartbeat:<br>  # 心跳频率, 单位秒<br>  # -1 为关闭心跳<br>  interval: -1<br><br>message:<br>  # 上报数据类型<br>  # 可选: string,array<br>  post-format: string<br>  # 是否忽略无效的CQ码, 如果为假将原样发送<br>  ignore-invalid-cqcode: false<br>  # 是否强制分片发送消息<br>  # 分片发送将会带来更快的速度<br>  # 但是兼容性会有些问题<br>  force-fragment: false<br>  # 是否将url分片发送<br>  fix-url: false<br>  # 下载图片等请求网络代理<br>  proxy-rewrite: &#x27;&#x27;<br>  # 是否上报自身消息<br>  report-self-message: false<br>  # 移除服务端的Reply附带的At<br>  remove-reply-at: false<br>  # 为Reply附加更多信息<br>  extra-reply-data: false<br>  # 跳过 Mime 扫描, 忽略错误数据<br>  skip-mime-scan: false<br><br>output:<br>  # 日志等级 trace,debug,info,warn,error<br>  log-level: warn<br>  # 日志时效 单位天. 超过这个时间之前的日志将会被自动删除. 设置为 0 表示永久保留.<br>  log-aging: 15<br>  # 是否在每次启动时强制创建全新的文件储存日志. 为 false 的情况下将会在上次启动时创建的日志文件续写<br>  log-force-new: true<br>  # 是否启用日志颜色<br>  log-colorful: true<br>  # 是否启用 DEBUG<br>  debug: false # 开启调试模式<br><br># 默认中间件锚点<br>default-middlewares: &amp;default<br>  # 访问密钥, 强烈推荐在公网的服务器设置<br>  access-token: &#x27;&#x27;<br>  # 事件过滤器文件目录<br>  filter: &#x27;&#x27;<br>  # API限速设置<br>  # 该设置为全局生效<br>  # 原 cqhttp 虽然启用了 rate_limit 后缀, 但是基本没插件适配<br>  # 目前该限速设置为令牌桶算法, 请参考:<br>  # https://baike.baidu.com/item/%E4%BB%A4%E7%89%8C%E6%A1%B6%E7%AE%97%E6%B3%95/6597000?fr=aladdin<br>  rate-limit:<br>    enabled: false # 是否启用限速<br>    frequency: 1  # 令牌回复频率, 单位秒<br>    bucket: 1     # 令牌桶大小<br><br>database: # 数据库相关设置<br>  leveldb:<br>    # 是否启用内置leveldb数据库<br>    # 启用将会增加10-20MB的内存占用和一定的磁盘空间<br>    # 关闭将无法使用 撤回 回复 get_msg 等上下文相关功能<br>    enable: true<br><br>  # 媒体文件缓存， 删除此项则使用缓存文件(旧版行为)<br>  cache:<br>    image: data/image.db<br>    video: data/video.db<br><br># 连接服务列表<br>servers:<br>  # 添加方式，同一连接方式可添加多个，具体配置说明请查看文档<br>  #- http: # http 通信<br>  #- ws:   # 正向 Websocket<br>  #- ws-reverse: # 反向 Websocket<br>  #- pprof: #性能分析服务器<br><br>  - http: # HTTP 通信设置<br>      address: 0.0.0.0:8700 # HTTP监听地址<br>      timeout: 5      # 反向 HTTP 超时时间, 单位秒，&lt;5 时将被忽略<br>      long-polling:   # 长轮询拓展<br>        enabled: false       # 是否开启<br>        max-queue-size: 2000 # 消息队列大小，0 表示不限制队列大小，谨慎使用<br>      middlewares:<br>        &lt;&lt;: *default # 引用默认中间件<br>      post:           # 反向HTTP POST地址列表<br>      #- url: &#x27;&#x27;                # 地址<br>      #  secret: &#x27;&#x27;             # 密钥<br>      #  max-retries: 3         # 最大重试，0 时禁用<br>      #  retries-interval: 1500 # 重试时间，单位毫秒，0 时立即<br>      - url: http://127.0.0.1:7777/ # 地址<br>        secret: &#x27;&#x27;                  # 密钥<br>        max-retries: 0             # 最大重试，0 时禁用<br>        retries-interval: 1000      # 重试时间，单位毫秒，0 时立即<br></code></pre></td></tr></table></figure>
<p>其中，QQ账号替换为自己的小号。</p>
<p>设置完后，点击<code>go-cqhttp.bat</code>，弹出二维码进行扫码登录即可。</p>
<h2 id="5-后端逻辑"><a href="#5-后端逻辑" class="headerlink" title="5.后端逻辑"></a>5.后端逻辑</h2><p>在上一步中，设置了QQ机器人监听本机<code>7777</code>这个端口用来发送信息，<code>8700</code>这个端口用来接收信息。这一步需要采用一个后端框架来处理和发送信息。这里参考[2]的提供的方案，采用轻量化的Flask作为后端框架。</p>
<p>首先需要安装环境依赖，新建<code>requirements.txt</code>，输入以下内容：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs python">certifi==<span class="hljs-number">2022.12</span><span class="hljs-number">.7</span><br>charset-normalizer==<span class="hljs-number">2.1</span><span class="hljs-number">.1</span><br>click==<span class="hljs-number">8.1</span><span class="hljs-number">.3</span><br>Flask==<span class="hljs-number">2.2</span><span class="hljs-number">.2</span><br>idna==<span class="hljs-number">3.4</span><br>importlib-metadata==<span class="hljs-number">5.1</span><span class="hljs-number">.0</span><br>itsdangerous==<span class="hljs-number">2.1</span><span class="hljs-number">.2</span><br>Jinja2==<span class="hljs-number">3.1</span><span class="hljs-number">.2</span><br>MarkupSafe==<span class="hljs-number">2.1</span><span class="hljs-number">.1</span><br>OpenAIAuth==<span class="hljs-number">0.0</span><span class="hljs-number">.3</span><span class="hljs-number">.1</span><br>PyMySQL==<span class="hljs-number">1.0</span><span class="hljs-number">.2</span><br>requests==<span class="hljs-number">2.28</span><span class="hljs-number">.1</span><br>tls-client==<span class="hljs-number">0.1</span><span class="hljs-number">.5</span><br>urllib3==<span class="hljs-number">1.26</span><span class="hljs-number">.13</span><br>Werkzeug==<span class="hljs-number">2.2</span><span class="hljs-number">.2</span><br>zipp==<span class="hljs-number">3.11</span><span class="hljs-number">.0</span><br></code></pre></td></tr></table></figure>
<p>在python环境中安装上述依赖：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python">pip install -r requirements.txt<br></code></pre></td></tr></table></figure>

<p>安装后，编写后端程序</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> json<br><span class="hljs-keyword">import</span> requests<br><span class="hljs-keyword">from</span> flask <span class="hljs-keyword">import</span> request, Flask<br><span class="hljs-keyword">from</span> revChatGPT.revChatGPT <span class="hljs-keyword">import</span> Chatbot<br><br>cqhttp_url = <span class="hljs-string">&quot;http://localhost:8700&quot;</span>  <span class="hljs-comment"># CQ-http地址</span><br>qq_no = <span class="hljs-string">&quot;自己的QQ号&quot;</span> <span class="hljs-comment"># 机器人QQ号，记得修改</span><br>config = &#123;<br>    <span class="hljs-string">&quot;session_token&quot;</span>: <span class="hljs-string">&quot;上一步的session_token&quot;</span>,<br>    <span class="hljs-string">&quot;cf_clearance&quot;</span>: <span class="hljs-string">&quot;上一步的cf_clearance&quot;</span>,<br>    <span class="hljs-string">&quot;user_agent&quot;</span>: <span class="hljs-string">&quot;上一步的user_agent&quot;</span><br>&#125;<br><span class="hljs-comment"># 创建一个服务，把当前这个python文件当做一个服务</span><br>server = Flask(__name__)<br><span class="hljs-comment"># 创建ChatGPT实例</span><br>chatbot = Chatbot(config, conversation_id=<span class="hljs-literal">None</span>)<br><br><span class="hljs-comment"># 与ChatGPT交互的方法</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">chat</span>(<span class="hljs-params">msg</span>):<br>    <span class="hljs-keyword">try</span>:<br>        message = chatbot.get_chat_response(msg)[<span class="hljs-string">&#x27;message&#x27;</span>]<br>        <span class="hljs-comment"># 下面这行代码是获取对话id，如果你需要的话，id就是这么获取的</span><br>        <span class="hljs-comment"># chatbot.conversation_id</span><br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;ChatGPT返回内容: &quot;</span>)<br>        <span class="hljs-built_in">print</span>(message)<br>        <span class="hljs-keyword">return</span> message<br>    <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> error:<br>        <span class="hljs-keyword">return</span> <span class="hljs-built_in">str</span>(<span class="hljs-string">&#x27;别问了，我得休息一下了&#x27;</span>)<br><br><span class="hljs-comment"># 测试接口，可以用来测试与ChatGPT的交互是否正常，用来排查问题</span><br><span class="hljs-meta">@server.route(<span class="hljs-params"><span class="hljs-string">&#x27;/chat&#x27;</span>, methods=[<span class="hljs-string">&#x27;post&#x27;</span>]</span>)</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">chatapi</span>():<br>    requestJson = request.get_data()<br>    <span class="hljs-keyword">if</span> requestJson <span class="hljs-keyword">is</span> <span class="hljs-literal">None</span> <span class="hljs-keyword">or</span> requestJson == <span class="hljs-string">&quot;&quot;</span> <span class="hljs-keyword">or</span> requestJson == &#123;&#125;:<br>        resu = &#123;<span class="hljs-string">&#x27;code&#x27;</span>: <span class="hljs-number">1</span>, <span class="hljs-string">&#x27;msg&#x27;</span>: <span class="hljs-string">&#x27;请求内容不能为空&#x27;</span>&#125;<br>        <span class="hljs-keyword">return</span> json.dumps(resu, ensure_ascii=<span class="hljs-literal">False</span>)<br>    data = json.loads(requestJson)<br>    <span class="hljs-built_in">print</span>(data)<br>    <span class="hljs-keyword">try</span>:<br>        msg = chat(data[<span class="hljs-string">&#x27;msg&#x27;</span>])<br>    <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> error:<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;接口报错&quot;</span>)<br>        resu = &#123;<span class="hljs-string">&#x27;code&#x27;</span>: <span class="hljs-number">1</span>, <span class="hljs-string">&#x27;msg&#x27;</span>: <span class="hljs-string">&#x27;请求异常: &#x27;</span> + <span class="hljs-built_in">str</span>(error)&#125;<br>        <span class="hljs-keyword">return</span> json.dumps(resu, ensure_ascii=<span class="hljs-literal">False</span>)<br>    <span class="hljs-keyword">else</span>:<br>        resu = &#123;<span class="hljs-string">&#x27;code&#x27;</span>: <span class="hljs-number">0</span>, <span class="hljs-string">&#x27;data&#x27;</span>: msg&#125;<br>        <span class="hljs-keyword">return</span> json.dumps(resu, ensure_ascii=<span class="hljs-literal">False</span>)<br><br><br><span class="hljs-comment"># 测试接口，可以测试本代码是否正常启动</span><br><span class="hljs-meta">@server.route(<span class="hljs-params"><span class="hljs-string">&#x27;/&#x27;</span>, methods=[<span class="hljs-string">&quot;GET&quot;</span>]</span>)</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">index</span>():<br>    <span class="hljs-keyword">return</span> <span class="hljs-string">f&quot;你好，QQ机器人逻辑处理端已启动&lt;br/&gt;&quot;</span><br><br><br><span class="hljs-comment"># qq消息上报接口，qq机器人监听到的消息内容将被上报到这里</span><br><span class="hljs-meta">@server.route(<span class="hljs-params"><span class="hljs-string">&#x27;/&#x27;</span>, methods=[<span class="hljs-string">&quot;POST&quot;</span>]</span>)</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">get_message</span>():<br>    <span class="hljs-keyword">if</span> request.get_json().get(<span class="hljs-string">&#x27;message_type&#x27;</span>) == <span class="hljs-string">&#x27;private&#x27;</span>:  <span class="hljs-comment"># 如果是私聊信息</span><br>        uid = request.get_json().get(<span class="hljs-string">&#x27;sender&#x27;</span>).get(<span class="hljs-string">&#x27;user_id&#x27;</span>)  <span class="hljs-comment"># 获取信息发送者的 QQ号码</span><br>        message = request.get_json().get(<span class="hljs-string">&#x27;raw_message&#x27;</span>)  <span class="hljs-comment"># 获取原始信息</span><br>        sender = request.get_json().get(<span class="hljs-string">&#x27;sender&#x27;</span>)  <span class="hljs-comment"># 消息发送者的资料</span><br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;收到私聊消息：&quot;</span>)<br>        <span class="hljs-built_in">print</span>(message)<br>        <span class="hljs-comment"># 下面你可以执行更多逻辑，这里只演示与ChatGPT对话</span><br>        msg_text = chat(message)  <span class="hljs-comment"># 将消息转发给ChatGPT处理</span><br>        send_private_message(uid, msg_text)  <span class="hljs-comment"># 将消息返回的内容发送给用户</span><br>    <span class="hljs-keyword">if</span> request.get_json().get(<span class="hljs-string">&#x27;message_type&#x27;</span>) == <span class="hljs-string">&#x27;group&#x27;</span>:  <span class="hljs-comment"># 如果是群消息</span><br>        gid = request.get_json().get(<span class="hljs-string">&#x27;group_id&#x27;</span>)  <span class="hljs-comment"># 群号</span><br>        uid = request.get_json().get(<span class="hljs-string">&#x27;sender&#x27;</span>).get(<span class="hljs-string">&#x27;user_id&#x27;</span>)  <span class="hljs-comment"># 发言者的qq号</span><br>        message = request.get_json().get(<span class="hljs-string">&#x27;raw_message&#x27;</span>)  <span class="hljs-comment"># 获取原始信息</span><br>        <span class="hljs-comment"># 判断当被@时才回答</span><br>        <span class="hljs-keyword">if</span> <span class="hljs-built_in">str</span>(<span class="hljs-string">&quot;[CQ:at,qq=%s]&quot;</span>%qq_no) <span class="hljs-keyword">in</span> message:<br>            sender = request.get_json().get(<span class="hljs-string">&#x27;sender&#x27;</span>)<br>            <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;收到群聊消息：&quot;</span>)<br>            <span class="hljs-built_in">print</span>(message)<br>            <span class="hljs-comment"># 下面你可以执行更多逻辑，这里只演示与ChatGPT对话</span><br>            msg_text = chat(message)  <span class="hljs-comment"># 将消息转发给ChatGPT处理</span><br>            msg_text = <span class="hljs-built_in">str</span>(<span class="hljs-string">&#x27;[CQ:at,qq=%s]\n&#x27;</span>%uid) + <span class="hljs-built_in">str</span>(msg_text)  <span class="hljs-comment"># @发言人</span><br>            send_group_message(gid, msg_text)  <span class="hljs-comment"># 将消息转发到群里</span><br>    <span class="hljs-keyword">if</span> request.get_json().get(<span class="hljs-string">&#x27;post_type&#x27;</span>) == <span class="hljs-string">&#x27;request&#x27;</span>:  <span class="hljs-comment"># 收到请求消息</span><br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;收到请求消息&quot;</span>)<br>        request_type = request.get_json().get(<span class="hljs-string">&#x27;request_type&#x27;</span>)  <span class="hljs-comment"># group</span><br>        uid = request.get_json().get(<span class="hljs-string">&#x27;user_id&#x27;</span>)<br>        flag = request.get_json().get(<span class="hljs-string">&#x27;flag&#x27;</span>)<br>        comment = request.get_json().get(<span class="hljs-string">&#x27;comment&#x27;</span>)<br>        <span class="hljs-keyword">if</span> request_type == <span class="hljs-string">&quot;friend&quot;</span>:<br>            <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;收到加好友申请&quot;</span>)<br>            <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;QQ：&quot;</span>, uid)<br>            <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;验证信息&quot;</span>, comment)<br>            <span class="hljs-comment"># false拒绝，你可以自己写逻辑判断是否通过</span><br>            set_friend_add_request(flag, <span class="hljs-string">&quot;false&quot;</span>)<br>        <span class="hljs-keyword">if</span> request_type == <span class="hljs-string">&quot;group&quot;</span>:<br>            <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;收到群请求&quot;</span>)<br>            sub_type = request.get_json().get(<span class="hljs-string">&#x27;sub_type&#x27;</span>)  <span class="hljs-comment"># 两种，一种的加群(当机器人为管理员的情况下)，一种是邀请入群</span><br>            gid = request.get_json().get(<span class="hljs-string">&#x27;group_id&#x27;</span>)<br>            <span class="hljs-keyword">if</span> sub_type == <span class="hljs-string">&quot;add&quot;</span>:<br>                <span class="hljs-comment"># 如果机器人是管理员，会收到这种请求，请自行处理</span><br>                <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;收到加群申请，不进行处理&quot;</span>)<br>            <span class="hljs-keyword">elif</span> sub_type == <span class="hljs-string">&quot;invite&quot;</span>:<br>                <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;收到邀请入群申请&quot;</span>)<br>                <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;群号：&quot;</span>, gid)<br>                <span class="hljs-comment"># false拒绝，你可以自己写逻辑判断是否通过</span><br>                set_group_invite_request(flag, <span class="hljs-string">&quot;false&quot;</span>)<br>    <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;ok&quot;</span><br><br><br><span class="hljs-comment"># 发送私聊消息方法 uid为qq号，message为消息内容</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">send_private_message</span>(<span class="hljs-params">uid, message</span>):<br>    <span class="hljs-keyword">try</span>:<br>        res = requests.post(url=cqhttp_url + <span class="hljs-string">&quot;/send_private_msg&quot;</span>,<br>                            params=&#123;<span class="hljs-string">&#x27;user_id&#x27;</span>: <span class="hljs-built_in">int</span>(uid), <span class="hljs-string">&#x27;message&#x27;</span>: message&#125;).json()<br>        <span class="hljs-keyword">if</span> res[<span class="hljs-string">&quot;status&quot;</span>] == <span class="hljs-string">&quot;ok&quot;</span>:<br>            <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;私聊消息发送成功&quot;</span>)<br>        <span class="hljs-keyword">else</span>:<br>            <span class="hljs-built_in">print</span>(res)<br>            <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;私聊消息发送失败，错误信息：&quot;</span> + <span class="hljs-built_in">str</span>(res[<span class="hljs-string">&#x27;wording&#x27;</span>]))<br><br>    <span class="hljs-keyword">except</span>:<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;私聊消息发送失败&quot;</span>)<br><br><br><span class="hljs-comment"># 发送群消息方法</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">send_group_message</span>(<span class="hljs-params">gid, message</span>):<br>    <span class="hljs-keyword">try</span>:<br>        res = requests.post(url=cqhttp_url + <span class="hljs-string">&quot;/send_group_msg&quot;</span>,<br>                            params=&#123;<span class="hljs-string">&#x27;group_id&#x27;</span>: <span class="hljs-built_in">int</span>(gid), <span class="hljs-string">&#x27;message&#x27;</span>: message&#125;).json()<br>        <span class="hljs-keyword">if</span> res[<span class="hljs-string">&quot;status&quot;</span>] == <span class="hljs-string">&quot;ok&quot;</span>:<br>            <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;群消息发送成功&quot;</span>)<br>        <span class="hljs-keyword">else</span>:<br>            <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;群消息发送失败，错误信息：&quot;</span> + <span class="hljs-built_in">str</span>(res[<span class="hljs-string">&#x27;wording&#x27;</span>]))<br>    <span class="hljs-keyword">except</span>:<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;群消息发送失败&quot;</span>)<br><br><br><span class="hljs-comment"># 处理好友请求</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">set_friend_add_request</span>(<span class="hljs-params">flag, approve</span>):<br>    <span class="hljs-keyword">try</span>:<br>        requests.post(url=cqhttp_url + <span class="hljs-string">&quot;/set_friend_add_request&quot;</span>, params=&#123;<span class="hljs-string">&#x27;flag&#x27;</span>: flag, <span class="hljs-string">&#x27;approve&#x27;</span>: approve&#125;)<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;处理好友申请成功&quot;</span>)<br>    <span class="hljs-keyword">except</span>:<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;处理好友申请失败&quot;</span>)<br><br><br><span class="hljs-comment"># 处理邀请加群请求</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">set_group_invite_request</span>(<span class="hljs-params">flag, approve</span>):<br>    <span class="hljs-keyword">try</span>:<br>        requests.post(url=cqhttp_url + <span class="hljs-string">&quot;/set_group_add_request&quot;</span>,<br>                      params=&#123;<span class="hljs-string">&#x27;flag&#x27;</span>: flag, <span class="hljs-string">&#x27;sub_type&#x27;</span>: <span class="hljs-string">&#x27;invite&#x27;</span>, <span class="hljs-string">&#x27;approve&#x27;</span>: approve&#125;)<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;处理群申请成功&quot;</span>)<br>    <span class="hljs-keyword">except</span>:<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;处理群申请失败&quot;</span>)<br><br><br><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&#x27;__main__&#x27;</span>:<br>    server.run(port=<span class="hljs-number">7777</span>, host=<span class="hljs-string">&#x27;0.0.0.0&#x27;</span>)<br></code></pre></td></tr></table></figure>

<p>这里的QQ号，config信息替换为自己的内容。</p>
<p>运行之后，就部署完成了。</p>
<h1 id="ChatGPT评价"><a href="#ChatGPT评价" class="headerlink" title="ChatGPT评价"></a>ChatGPT评价</h1><p>回到开头的问题，ChatGPT究竟算不算强人工智能？</p>
<p>以往NLP中的模型往往只能处理文本分类、文本续写、文本风格迁移等单一任务，而ChatGPT却能够处理多任务，的确是一大突破。然而，在测试过程中，它仍有一些问题：</p>
<ul>
<li>使用速度慢<br>使用速度慢一方面是由于官方服务器同时段并发量大，另一方面是GPT类的模型是一个字一个字的输出，比如在官网上看到的是一个字一个字吐出来，而不是一整句话。如果插入到QQ机器人回复中，需要等待其将所有内容输出完再一并发送。内容越多，等待时间越久。</li>
<li>太过“自信”<br>ChatGPT很像一本百科全书，对于未知的东西，它仍然会“习惯性”地去做解释，甚至，它很容易被一些关键词所误导。比如，下图中群友对它进行的测试：</li>
</ul>
<p><img src="https://img-blog.csdnimg.cn/fe7a6c04208e47a581d93af890f00350.png#pic_center" alt="在这里插入图片描述"></p>
<ul>
<li>无法获取最新信息<br>ChatGPT是通过2021年以前的数据训练而来的，因此它无法获取最新信息，这让它无法取代搜索引擎。</li>
<li>易被催眠<br>最后这点，不多做解释，在群友的催眠下，它被成功洗脑了。。</li>
</ul>
<p><img src="https://img-blog.csdnimg.cn/d3125ada25f44f3abfdb8f89bb8dacb4.png#pic_center" alt="在这里插入图片描述"></p>
<h1 id="TODD"><a href="#TODD" class="headerlink" title="TODD"></a>TODD</h1><p>后续计划在此框架下开发更多内容：</p>
<ul>
<li>config自动设置<br>目前官方界面的config两小时会失活，后续会想办法自动进行获取设置</li>
<li>加入其它功能<br>可能考虑添加Ai绘画等功能</li>
</ul>
<h1 id="后记"><a href="#后记" class="headerlink" title="后记"></a>后记</h1><p>— 2023-02-12更</p>
<p>一段时间没关注ChatGPT了，没想到OpenAi和微软合作之后，又掀起了第二波热潮。<br>于是重新在GitHub上浏览最新消息，发现本已归档的ChatGPT逆向工程项目又开始更新，作者采用了代理池的方式，在此突破了官方的地区的封锁。</p>
<p>于是更新了一下：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python">pip3 install revChatGPT --upgrade<br></code></pre></td></tr></table></figure>

<p>注：该版本需要的谷歌浏览器内核版本需在110以上，使用前需进行更新。</p>
<p><img src="https://img-blog.csdnimg.cn/1831b955a7384b159e95044817893c7c.png#pic_center" alt="在这里插入图片描述"></p>
<p>下面是一个新版的调用示例：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">from</span> revChatGPT.Unofficial <span class="hljs-keyword">import</span> Chatbot<br><br>chatbot = Chatbot(&#123;<br>  <span class="hljs-string">&quot;email&quot;</span>: <span class="hljs-string">&quot;自己的账号&quot;</span>,<br>  <span class="hljs-string">&quot;password&quot;</span>: <span class="hljs-string">&quot;自己的密码&quot;</span><br>&#125;, conversation_id=<span class="hljs-literal">None</span>, parent_id=<span class="hljs-literal">None</span>) <span class="hljs-comment"># You can start a custom conversation</span><br><br>response = chatbot.ask(<span class="hljs-string">&quot;你好&quot;</span>, conversation_id=<span class="hljs-literal">None</span>, parent_id=<span class="hljs-literal">None</span>) <span class="hljs-comment"># You can specify custom conversation and parent ids. Otherwise it uses the saved conversation (yes. conversations are automatically saved)</span><br><span class="hljs-built_in">print</span>(response)<br></code></pre></td></tr></table></figure>
<p>经实测发现，如果一分钟收到3个请求以上就会被限制一定时间，响应速度也不及GPT3的Api，不过优势在于免费，不限制输入长度，且有上下文记忆(又可以催眠了😄)</p>
<p>— 2023-02-16更</p>
<p>revChatGPT上面的Unofficial版本在第二天的更新中变成了V2，不过仅过了一天，原作者的代理服务器遭到了OpenAi的攻击，导致V2版本直接失效。<br>作者又紧急升级了V1版本，并绕过了Cloudfare检测，现在无需启动浏览器也能够正常运行。</p>
<p>调用示例：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">from</span> revChatGPT.V1 <span class="hljs-keyword">import</span> Chatbot<br><br>chatbot = Chatbot(config=&#123;<br>  <span class="hljs-string">&quot;email&quot;</span>: <span class="hljs-string">&quot;自己的账号&quot;</span>,<br>  <span class="hljs-string">&quot;password&quot;</span>: <span class="hljs-string">&quot;自己的密码&quot;</span><br>&#125;)<br><br><span class="hljs-keyword">for</span> data <span class="hljs-keyword">in</span> chatbot.ask(<br>  <span class="hljs-string">&#x27;你好&#x27;</span>,<br>  conversation_id=chatbot.config.get(<span class="hljs-string">&quot;conversation&quot;</span>),<br>  parent_id=chatbot.config.get(<span class="hljs-string">&quot;parent_id&quot;</span>),<br>):<br>  result = data[<span class="hljs-string">&quot;message&quot;</span>] <br><br><span class="hljs-built_in">print</span>(result)<br></code></pre></td></tr></table></figure>

<p>后面更新情况不打算在更新了，后续的变化将直接写入仓库中，敬请关注(star)Qbot仓库，地址在文首。</p>
<h1 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h1><p>[1]ChatGPT是怎样被训练出来的？<a target="_blank" rel="noopener" href="https://www.bilibili.com/video/BV1BG4y137SH/">https://www.bilibili.com/video/BV1BG4y137SH/</a><br>[2]使用Python对接OpenAi APi 实现智能QQ机器人<a target="_blank" rel="noopener" href="https://lucent.blog/?p=99"> https://lucent.blog/?p=99</a></p>
<div id="paginator"></div></div><div id="post-footer"><div id="pages" style="justify-content: flex-end"><div class="footer-link" style="width: 50%;right:1px;border-left:1px #fe2 solid"><a href="/2023/02/16/hello-world/">Hexo建站流程全记录 Prev →</a></div></div></div></div><div class="bottom-btn"><div><a id="to-top" onClick="scrolls.scrolltop();" title="To Top" style="opacity: 0; display: none;">∧</a><a id="to-index" href="#toc-div" title="To Catalog">≡</a><a id="color-mode" onClick="colorMode.change()" title="Change Theme"></a></div></div></article><aside><div id="about"><a href="/" id="logo"><img src="https://ak.hypergryph.com/assets/index/images/ak/pc/faction/1.png" alt="Logo"></a><h1 id="Dr"><a target="_blank" rel="noopener" href="https://space.bilibili.com/472442675">zstar</a></h1><div id="description"><p>一个兴趣使然的创作者</p></div></div><div id="aside-block"><div id="toc-div"><h1>Catalog</h1><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#ChatGPT%E7%AE%80%E4%BB%8B"><span class="toc-number">1.</span> <span class="toc-text">ChatGPT简介</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#ChatGPT%E5%8E%9F%E7%90%86"><span class="toc-number">2.</span> <span class="toc-text">ChatGPT原理</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#ChatGPT%E9%83%A8%E7%BD%B2"><span class="toc-number">3.</span> <span class="toc-text">ChatGPT部署</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-%E6%B3%A8%E5%86%8C%E8%B4%A6%E5%8F%B7"><span class="toc-number">3.1.</span> <span class="toc-text">1.注册账号</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-%E8%8E%B7%E5%8F%96%E7%95%8C%E9%9D%A2%E4%BF%A1%E6%81%AF"><span class="toc-number">3.2.</span> <span class="toc-text">2.获取界面信息</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-%E8%B0%83%E7%94%A8%E6%B5%8B%E8%AF%95"><span class="toc-number">3.3.</span> <span class="toc-text">3.调用测试</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-QQ%E6%9C%BA%E5%99%A8%E4%BA%BA%E6%90%AD%E5%BB%BA"><span class="toc-number">3.4.</span> <span class="toc-text">4.QQ机器人搭建</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-%E5%90%8E%E7%AB%AF%E9%80%BB%E8%BE%91"><span class="toc-number">3.5.</span> <span class="toc-text">5.后端逻辑</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#ChatGPT%E8%AF%84%E4%BB%B7"><span class="toc-number">4.</span> <span class="toc-text">ChatGPT评价</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#TODD"><span class="toc-number">5.</span> <span class="toc-text">TODD</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%90%8E%E8%AE%B0"><span class="toc-number">6.</span> <span class="toc-text">后记</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%8F%82%E8%80%83"><span class="toc-number">7.</span> <span class="toc-text">参考</span></a></li></ol></div></div><footer><nobr><span class="text-title">ICP</span><a class="text-content" target="_blank" rel="noopener" href="https://beian.miit.gov.cn/">浙ICP备2021017852号-1</a></nobr></footer></aside></main><canvas id="canvas-dust"></canvas><script src="/js/search.js"></script><script class="pjax-js">reset=_=>{code.findCode();}</script><script src="/js/arknights.js"></script><script src="/js/pjax.js"></script><script>window.addEventListener("load",() => {pjax = new Pjax({
 cacheBust: false,
 selectors: ['title','article','#aside-block','.pjax-js'],
 switches: {'article': Pjax.switches.sideBySide},
 switchesOptions: {
   'article': {
     classNames: {
       remove: "pjax-out",
       add: "pjax-in"
     }
   }
 }
});
document.addEventListener("pjax:complete", reset);reset()})</script></body></html>